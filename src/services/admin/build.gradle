/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'net.danvi.dmall.java-conventions'
}

description = 'davichmarket.admin'

if (BuildTarget.getTarget() == 'all' || BuildTarget.getTarget().find("admin") != null) {
    plugins.apply('war')
} else {
    plugins.apply('java')
}

dependencies {
    implementation project(':config')
    implementation project(':module.common')
    implementation project(':module.business')
    implementation project(':module.smsemail.common')
    implementation project(':module.smsemail.remote')
}

//war {
//    webAppDirectory = file('src/main/webapp')
//    from 'src/rootContent' // adds a file-set to the root of the archive
//    webInf { from 'src/additionalWebInf' } // adds a file-set to the WEB-INF dir.
//    classpath fileTree('WEB-INF/classes') // adds a file-set to the WEB-INF/lib dir.
//    webXml = file('src/main/webapp/WEB-INF/web.xml') // copies a file to WEB-INF/web.xml
//}

tasks.processResources {
    String profile = BuildProfile.getProfile()
    duplicatesStrategy = DuplicatesStrategy.INCLUDE
    from "src/main/resources_${profile}"
}

tasks.whenTaskAdded { task ->
    if("lint" == task.name && "stage" != BuildProfile.getProfile()) {
        task.enabled = false
    }
}

